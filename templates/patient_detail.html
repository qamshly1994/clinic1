{% extends "base.html" %}
{% block content %}
<h3>معلومات المريض: {{ patient.name }}</h3>

<h5 class="mt-4">إضافة جلسة جديدة</h5>
<form method="POST">
  <div class="row">
    <div class="col-md-3 mb-2">
      <label>تاريخ الجلسة</label>
      <input type="date" name="date" class="form-control" required>
    </div>
    <div class="col-md-2 mb-2">
      <label>الوزن</label>
      <input type="number" step="0.1" name="weight" class="form-control">
    </div>
    <div class="col-md-2 mb-2">
      <label>البطن قبل</label>
      <input type="number" step="0.1" name="belly_before" class="form-control">
    </div>
    <div class="col-md-2 mb-2">
      <label>البطن بعد</label>
      <input type="number" step="0.1" name="belly_after" class="form-control">
    </div>
    <div class="col-md-3 mb-2">
      <label>ملاحظات</label>
      <input type="text" name="notes" class="form-control">
    </div>
  </div>
  <button type="submit" class="btn btn-success mt-2">حفظ الجلسة</button>
</form>

<h5 class="mt-4">سجل الجلسات</h5>
<table class="table table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>التاريخ</th>
      <th>الوزن</th>
      <th>البطن قبل</th>
      <th>البطن بعد</th>
      <th>ملاحظات</th>
    </tr>
  </thead>
  <tbody>
    {% for s in sessions %}
    <tr>
      <td>{{ loop.index }}</td>
      <td>{{ s.date.strftime('%Y-%m-%d') }}</td>
      <td>{{ s.weight }}</td>
      <td>{{ s.belly_before }}</td>
      <td>{{ s.belly_after }}</td>
      <td>{{ s.notes }}</td>
    </tr>
    {% else %}
    <tr>
      <td colspan="6" class="text-center">لا توجد جلسات بعد</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
